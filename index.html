<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pearl Browser</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/14.0.0/material-components-web.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <div class="header" id="header">
        <div class="address-bar-container">
            <span class="material-icons search-icon">search</span>
            <input type="text" class="address-bar" id="addressBar" placeholder="Search or type URL">
        </div>
        
        <!-- Wallet Dropdown -->
        <div class="wallet-dropdown" id="walletDropdown">
            <div class="wallet-button" onclick="toggleWalletDropdown()">
                <span class="material-icons">wallet</span>
            </div>
            <div class="wallet-dropdown-content">
                <div class="wallet-dropdown-item" onclick="openWalletTab('Primary wallet')">
                    <span class="material-icons">wallet</span>
                    <span>Primary wallet</span>
                </div>
                <div class="wallet-dropdown-item" onclick="openWalletTab('Pearl wallet')">
                    <span class="material-icons">wallet</span>
                    <span>Pearl wallet</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Container -->
    <div class="content-container">
        <!-- Tabs Container -->
        <div class="tabs-container" id="tabsContainer">
            <!-- Home Content -->
            <div class="home-content" id="homeContent">
                <!-- Brand Section -->
                <div class="brand-section">
                    <div class="pearl-logo"></div>
                    <h1 class="app-title">Pearl</h1>
                    <p class="app-subtitle">Secure and private browser</p>
                </div>

                <!-- Shortcuts Grid -->
                <div class="shortcuts-grid">
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://google.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">search</span>
                            </div>
                            <div class="shortcut-title">Google</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://youtube.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">play_circle</span>
                            </div>
                            <div class="shortcut-title">YouTube</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://github.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">code</span>
                            </div>
                            <div class="shortcut-title">GitHub</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://stackoverflow.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">help</span>
                            </div>
                            <div class="shortcut-title">Stack Overflow</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://reddit.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">forum</span>
                            </div>
                            <div class="shortcut-title">Reddit</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://twitter.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">chat</span>
                            </div>
                            <div class="shortcut-title">Twitter</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://linkedin.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">work</span>
                            </div>
                            <div class="shortcut-title">LinkedIn</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://docs.microsoft.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">description</span>
                            </div>
                            <div class="shortcut-title">Docs</div>
                        </a>
                    </div>
                </div>

                <!-- Recent Section -->
                <div class="recent-section">
                    <h2 class="section-title">Recently visited</h2>
                    
                    <ul class="mdc-list">
                        <li class="mdc-list-item" onclick="navigateToSite('https://docs.microsoft.com/dotnet')">
                            <div class="site-favicon">
                                <span class="material-icons" style="font-size: 14px;">description</span>
                            </div>
                            <div>
                                <div class="site-title">.NET Documentation</div>
                                <div class="site-url">docs.microsoft.com</div>
                            </div>
                        </li>
                        
                        <li class="mdc-list-item" onclick="navigateToSite('https://github.com')">
                            <div class="site-favicon">
                                <span class="material-icons" style="font-size: 14px;">code</span>
                            </div>
                            <div>
                                <div class="site-title">My project</div>
                                <div class="site-url">github.com</div>
                            </div>
                        </li>
                        
                        <li class="mdc-list-item" onclick="navigateToSite('https://stackoverflow.com/questions/tagged/c%23')">
                            <div class="site-favicon">
                                <span class="material-icons" style="font-size: 14px;">help</span>
                            </div>
                            <div>
                                <div class="site-title">C# Questions</div>
                                <div class="site-url">stackoverflow.com</div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Incognito Home Content -->
            <div class="incognito-home" id="incognitoHome">
                <div class="incognito-icon">
                    <span class="material-icons" style="font-size: inherit;">visibility_off</span>
                </div>
                <h2 class="incognito-title">You're incognito</h2>
                <p class="incognito-description">
                    Pearl won't save your browsing history, cookies, site data, or information entered in forms. Downloaded files and bookmarks will be saved.
                </p>
                
                <!-- Shortcuts Grid for Incognito -->
                <div class="shortcuts-grid">
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://google.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">search</span>
                            </div>
                            <div class="shortcut-title">Google</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://duckduckgo.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">security</span>
                            </div>
                            <div class="shortcut-title">DuckDuckGo</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://protonmail.com')">
                            <div class="shortcut-icon">
                                <span class="material-icons">email</span>
                            </div>
                            <div class="shortcut-title">ProtonMail</div>
                        </a>
                    </div>
                    
                    <div class="mdc-card">
                        <a class="shortcut-content" onclick="navigateToSite('https://signal.org')">
                            <div class="shortcut-icon">
                                <span class="material-icons">chat</span>
                            </div>
                            <div class="shortcut-title">Signal</div>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Search Page -->
            <div class="search-page" id="searchPage">
                <div class="search-message">Type in the address bar to start searching</div>
            </div>

            <!-- Browser View -->
            <div class="browser-view" id="browserView">
                <iframe class="browser-iframe" id="browserIframe" src="about:blank"></iframe>
            </div>
        </div>
    </div>

    <!-- Fake Tabs will be inserted here dynamically -->

    <!-- Tabs Screen -->
    <div class="tabs-screen" id="tabsScreen">
        <div class="tabs-screen-header" id="tabsScreenHeader">
            <div class="tabs-header-left">
                <div class="tabs-mode-icon active" id="singleTabsIcon" onclick="switchTabsMode('single')">
                    <div class="tab-icon-container">
                        <div class="tab-count-badge" style="margin: auto;" id="tabCountBadge2">3</div>
                    </div>
                </div>
                <div class="tabs-mode-icon" id="groupTabsIcon" onclick="switchTabsMode('groups')">
                    <span class="material-icons">grid_view</span>
                </div>
            </div>
            <button class="mdc-icon-button" style="    
            position: absolute;
            top: 50%;
            right: 2px;
            transform: translateY(-50%);" onclick="closeTabs()">
                <span class="material-icons">close</span>
            </button>
        </div>
        
        <div class="tabs-grid-container">
            <!-- Single Tabs View -->
            <div class="single-tabs-view" id="singleTabsView">
                <div class="single-tabs-grid" id="singleTabsGrid">
                    <!-- Tabs will be dynamically added here -->
                </div>
            </div>
            
            <!-- Groups View -->
            <div class="groups-view" id="groupsView">
                <!-- MultiTabs Grid -->
                <div class="multitabs-grid">
                    <div class="multitab-item" onclick="selectMultitab('sport')" data-multitab="sport">
                        <div class="multitab-header">
                            <div class="multitab-icons">
                                <div class="multitab-icon" style="background: #1a73e8;">
                                    <span class="material-icons">sports_soccer</span>
                                </div>
                                <div class="multitab-icon" style="background: #ea4335;">
                                    <span class="material-icons">sports_basketball</span>
                                </div>
                            </div>
                            <div class="multitab-menu" onclick="event.stopPropagation(); toggleMultitabMenu('sport')">
                                <span class="material-icons">more_vert</span>
                                <div class="multitab-dropdown" id="dropdown-sport">
                                    <div class="multitab-dropdown-item" onclick="openMultitab('sport')">Open</div>
                                    <div class="multitab-dropdown-item" onclick="deleteMultitab('sport')">Delete</div>
                                </div>
                            </div>
                        </div>
                        <div class="multitab-info">
                            <div class="multitab-title">
                                <span class="multitab-color-dot" style="background: #4285f4;"></span>
                                Sport
                            </div>
                            <div class="multitab-subtitle">Created now</div>
                        </div>
                    </div>
                    
                    <div class="multitab-item" onclick="selectMultitab('lavoro')" data-multitab="lavoro">
                        <div class="multitab-header">
                            <div class="multitab-icons">
                                <div class="multitab-icon" style="background: #34a853;">
                                    <span class="material-icons">work</span>
                                </div>
                                <div class="multitab-icon" style="background: #fbbc04;">
                                    <span class="material-icons">code</span>
                                </div>
                            </div>
                            <div class="multitab-menu" onclick="event.stopPropagation(); toggleMultitabMenu('lavoro')">
                                <span class="material-icons">more_vert</span>
                                <div class="multitab-dropdown" id="dropdown-lavoro">
                                    <div class="multitab-dropdown-item" onclick="openMultitab('lavoro')">Open</div>
                                    <div class="multitab-dropdown-item" onclick="deleteMultitab('lavoro')">Delete</div>
                                </div>
                            </div>
                        </div>
                        <div class="multitab-info">
                            <div class="multitab-title">
                                <span class="multitab-color-dot" style="background: #666;"></span>
                                Work
                            </div>
                            <div class="multitab-subtitle">19/07/2025</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="new-tab-fab" onclick="addNewTab()">
            <span class="material-icons">add</span>
        </div>
    </div>

    <!-- Bookmarks Modal -->
    <div class="bookmarks-modal" id="bookmarksModal">
        <div class="bookmarks-header">
            <div class="bookmarks-title">Bookmarks</div>
            <button class="mdc-icon-button" onclick="closeBookmarks()">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="bookmarks-content">
            <div class="bookmark-item" onclick="navigateToSite('https://github.com')">
                <div class="bookmark-favicon">
                    <span class="material-icons">code</span>
                </div>
                <div class="bookmark-info">
                    <div class="bookmark-title">GitHub</div>
                    <div class="bookmark-url">github.com</div>
                </div>
            </div>
            
            <div class="bookmark-item" onclick="navigateToSite('https://stackoverflow.com')">
                <div class="bookmark-favicon">
                    <span class="material-icons">help</span>
                </div>
                <div class="bookmark-info">
                    <div class="bookmark-title">Stack Overflow</div>
                    <div class="bookmark-url">stackoverflow.com</div>
                </div>
            </div>
            
            <div class="bookmark-item" onclick="navigateToSite('https://docs.microsoft.com')">
                <div class="bookmark-favicon">
                    <span class="material-icons">description</span>
                </div>
                <div class="bookmark-info">
                    <div class="bookmark-title">.NET Documentation</div>
                    <div class="bookmark-url">docs.microsoft.com</div>
                </div>
            </div>
            
            <div class="bookmark-item" onclick="navigateToSite('https://developer.mozilla.org')">
                <div class="bookmark-favicon">
                    <span class="material-icons">web</span>
                </div>
                <div class="bookmark-info">
                    <div class="bookmark-title">MDN Web Docs</div>
                    <div class="bookmark-url">developer.mozilla.org</div>
                </div>
            </div>
            
            <div class="bookmark-item" onclick="navigateToSite('https://react.dev')">
                <div class="bookmark-favicon">
                    <span class="material-icons">code</span>
                </div>
                <div class="bookmark-info">
                    <div class="bookmark-title">React Documentation</div>
                    <div class="bookmark-url">react.dev</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu Overlay -->
    <div class="menu-overlay" id="menuOverlay">
        <div class="menu-header">
            <div class="menu-title">Pearl Browser</div>
            <button class="mdc-icon-button" onclick="closeMenu()">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="menu-content">
            <!-- User Profile Section -->
            <div class="profile-section">
                <div class="profile-avatar" id="userAvatar" onclick="changeUserAvatar()">
                    <div class="avatar-icon">
                        <span class="material-icons">local_hospital</span>
                    </div>
                    <div class="profile-badge default" title="Default Profile">
                        <span class="material-icons">star</span>
                    </div>
                </div>
                <div class="profile-info">
                    <div class="profile-name" id="userName">Paolo</div>
                    <div class="profile-type" id="userProfileType">
                        <span class="material-icons profile-type-icon">person</span>
                        Default
                    </div>
                </div>
            </div>
            
            <div class="menu-divider"></div>
            
            <a class="menu-item" onclick="showProfileSettings(); closeMenu();">
                <span class="material-icons">person</span>
                <span>Profile Settings</span>
            </a>
            <a class="menu-item" onclick="showManageProfiles(); closeMenu();">
                <span class="material-icons">manage_accounts</span>
                <span>Manage Profiles</span>
            </a>
            
            <div class="menu-divider"></div>

            <a class="menu-item" onclick="addNewTab(); closeMenu();">
                <span class="material-icons">add</span>
                <span>New tab</span>
            </a>
            <a class="menu-item" onclick="addNewIncognitoTab(); closeMenu();">
                <span class="material-icons">visibility_off</span>
                <span>New incognito tab</span>
            </a>
            <a class="menu-item" onclick="showBookmarks()">
                <span class="material-icons">bookmark</span>
                <span>Bookmarks</span>
            </a>
            <a class="menu-item" onclick="showHistory()">
                <span class="material-icons">history</span>
                <span>History</span>
            </a>
            <a class="menu-item" onclick="showDownloads()">
                <span class="material-icons">download</span>
                <span>Downloads</span>
            </a>
            <a class="menu-item" onclick="openDappsTab(); closeMenu();">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="rgba(255, 255, 255, 0.7)"><path d="M120-120v-200h160l160-160v-128q-36-13-58-43.5T360-720q0-50 35-85t85-35q50 0 85 35t35 85q0 38-22 68.5T520-608v128l160 160h160v200H640v-122L480-402 320-242v122H120Z"/></svg>
                <span>Dapps Menu</span>
            </a>
            <a class="menu-item" onclick="openAiTab(); closeMenu();">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="rgba(255, 255, 255, 0.7)"><path d="M480-40q-50 0-85-35t-35-85q0-14 2.5-26.5T371-211L211-372q-12 5-25 8.5t-27 3.5q-50 0-84.5-35T40-480q0-50 34.5-85t84.5-35q39 0 70 22.5t43 57.5h95q9-26 28-44.5t45-27.5v-95q-35-12-57.5-43T360-800q0-50 35-85t85-35q50 0 85 35t35 85q0 14-3 27t-9 25l160 160q12-6 25-9t27-3q50 0 85 35t35 85q0 50-35 85t-85 35q-39 0-70-22.5T687-440h-95q-9 26-27.5 45T520-367v94q35 12 57.5 43t22.5 70q0 50-35 85t-85 35Z"/></svg>
                <span>AI Menu</span>
            </a>
            <a class="menu-item" onclick="showQrScanOverlay(); closeMenu();">
                <span class="material-icons">qr_code</span>
                <span>QR Code</span>
            </a>
            <a class="menu-item" onclick="showSettings(); closeMenu();">
                <span class="material-icons">settings</span>
                <span>Settings</span>
            </a>
        </div>
    </div>

    <!-- Active Multitab Bar -->
    <div class="active-multitab-bar" id="activeMultitabBar" style="padding-bottom: 15px;">
        <!-- Le tab attive verranno inserite dinamicamente qui -->
    </div>

    <!-- Multitab Details Modal -->
    <div class="multitab-details-modal" id="multitabDetailsModal">
        <div class="multitab-details-header">
            <div class="multitab-details-title">Multitabs</div>
            <button class="mdc-icon-button" onclick="closeMultitabDetails()">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="multitab-details-content">
            <div class="multitab-details-grid" id="multitabDetailsGrid">
                <!-- Tabs will be populated here -->
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" id="homeNav" onclick="showHome()">
            <span class="material-icons nav-icon">home</span>
        </div>
        <div class="nav-item" id="bookmarksNav" onclick="showBookmarks()">
            <span class="material-icons nav-icon">bookmark</span>
        </div>
        <div class="nav-item" id="searchNav" onclick="showManageProfiles()">
            <div class="profile-avatar" style="width: 35px; height: 35px; cursor: pointer; background: gray;">
                <div class="avatar-icon">
                    <span class="material-icons">person</span>
                </div>
            </div>
        </div>
        <div class="nav-item" id="tabsNav" onclick="toggleTabs()">
            <div class="tab-icon-container">
                <div class="tab-count-badge" id="tabCountBadge">3</div>
            </div>
        </div>
        <div class="nav-item" id="menuNav" onclick="toggleMenu()">
            <span class="material-icons nav-icon">more_vert</span>
        </div>
    </div>

    <div id="qrScanOverlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:9999; background:rgba(60,60,60,0.6);">
        <div style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none;">
            <svg width="100%" height="100%">
                <defs>
                    <mask id="qr-scan-mask">
                        <rect x="0" y="0" width="100%" height="100%" fill="white"/>
                        <rect x="50%" y="50%" width="240" height="240" fill="black" rx="24" transform="translate(-120,-120)"/>
                    </mask>
                </defs>
                <rect x="0" y="0" width="100%" height="100%" fill="black" fill-opacity="0.7" mask="url(#qr-scan-mask)"/>
                <rect x="50%" y="50%" width="240" height="240" fill="none" stroke="#fff" stroke-width="4" rx="24" transform="translate(-120,-120)"/>
            </svg>
        </div>
    </div>

    <!-- Downloads Modal -->
    <div class="bookmarks-modal" id="downloadsModal">
        <div class="bookmarks-header">
            <div class="bookmarks-title">Downloads</div>
            <button class="mdc-icon-button" onclick="closeDownloads()">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="bookmarks-content">
            <div style="text-align: center; padding: 40px 20px;">
                <span class="material-icons" style="font-size: 48px; color: rgba(255, 255, 255, 0.5);">download</span>
                <h3 style="color: white; margin: 16px 0 8px;">Your downloads will appear here</h3>
                <p style="color: rgba(255, 255, 255, 0.6); font-size: 14px; margin-bottom: 24px;">
                    You can save images and files to view offline or share with other apps
                </p>
                <div style="background: rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: white; font-size: 14px;">Using 0.00 KB</span>
                        <span style="color: rgba(255, 255, 255, 0.6); font-size: 12px;">of 221.81 GB</span>
                    </div>
                    <div style="height: 4px; background: rgba(255, 255, 255, 0.1); border-radius: 2px;">
                        <div style="width: 0%; height: 100%; background: var(--md-sys-color-primary); border-radius: 2px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="bookmarks-modal" id="historyModal">
        <div class="bookmarks-header">
            <div class="bookmarks-title">History</div>
            <div>
                <button class="mdc-icon-button" style="margin-right: 8px;" onclick="clearHistory()">
                    <span class="material-icons">delete</span>
                </button>
                <button class="mdc-icon-button" onclick="closeHistory()">
                    <span class="material-icons">close</span>
                </button>
            </div>
        </div>
        <div class="bookmarks-content">
            <div style="padding: 8px 16px; color: rgba(255, 255, 255, 0.7); font-size: 14px;">
                You can see the history of other apps that open links in Pearl.
            </div>
            <button class="mdc-list-item" style="justify-content: center; color: var(--md-sys-color-primary); padding: 3px;" onclick="clearHistory()">
                <span class="material-icons" style="margin-right: 8px;">delete</span>
                Clear browsing data...
            </button>
            
            <!-- History items will be added here dynamically -->
            <div id="historyItemsContainer">
                <div class="history-date">July 2, 2025</div>
                <div class="bookmark-item" onclick="navigateToSite('https://www.wikipedia.org')">
                    <div class="bookmark-favicon">W</div>
                    <div class="bookmark-info">
                        <div class="bookmark-title">Wikipedia</div>
                        <div class="bookmark-url">www.wikipedia.org</div>
                    </div>
                </div>
                
                <div class="history-date">June 3, 2025</div>
                <div class="bookmark-item" onclick="navigateToSite('https://www.wikipedia.org')">
                    <div class="bookmark-favicon">W</div>
                    <div class="bookmark-info">
                        <div class="bookmark-title">Wikipedia</div>
                        <div class="bookmark-url">www.wikipedia.org</div>
                    </div>
                </div>
                
                <div class="bookmark-item" onclick="navigateToSite('https://www.google.com/search?q=ethereum')">
                    <div class="bookmark-favicon">G</div>
                    <div class="bookmark-info">
                        <div class="bookmark-title">ethereum - Google Search</div>
                        <div class="bookmark-url">www.google.com</div>
                    </div>
                </div>
                
                <div class="bookmark-item" onclick="navigateToSite('https://www.google.com/search?q=bitcoin')">
                    <div class="bookmark-favicon">G</div>
                    <div class="bookmark-info">
                        <div class="bookmark-title">bitcoin - Google Search</div>
                        <div class="bookmark-url">www.google.com</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Picture Modal -->
    <div class="bookmarks-modal" id="profilePictureModal">
        <div class="bookmarks-header">
            <div class="bookmarks-title">Change profile picture</div>
            <button class="mdc-icon-button" onclick="closeProfilePictureModal()">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="bookmarks-content">
            <!-- Tab Navigation -->
            <div class="profile-tabs">
                <button class="profile-tab active" onclick="switchProfileTab('icons')">Icons library</button>
                <button class="profile-tab" onclick="switchProfileTab('computer')">From computer</button>
            </div>
            
            <!-- Icons Library Tab -->
            <div class="profile-tab-content" id="iconsContent">
                <!-- Background color selection -->
                <div class="color-section">
                    <h3 style="color: white; margin-bottom: 16px; font-size: 16px;">Background color</h3>
                    <div class="color-grid">
                        <div class="color-option selected" data-color="#f56565" style="background: #f56565;" onclick="selectBgColor('#f56565')"></div>
                        <div class="color-option" data-color="#ed8936" style="background: #ed8936;" onclick="selectBgColor('#ed8936')"></div>
                        <div class="color-option" data-color="#ecc94b" style="background: #ecc94b;" onclick="selectBgColor('#ecc94b')"></div>
                        <div class="color-option" data-color="#48bb78" style="background: #48bb78;" onclick="selectBgColor('#48bb78')"></div>
                        <div class="color-option" data-color="#38b2ac" style="background: #38b2ac;" onclick="selectBgColor('#38b2ac')"></div>
                        <div class="color-option" data-color="#4299e1" style="background: #4299e1;" onclick="selectBgColor('#4299e1')"></div>
                        <div class="color-option" data-color="#9f7aea" style="background: #9f7aea;" onclick="selectBgColor('#9f7aea')"></div>
                        <div class="color-option" data-color="#ed64a6" style="background: #ed64a6;" onclick="selectBgColor('#ed64a6')"></div>
                        <div class="color-option" data-color="#a0aec0" style="background: #a0aec0;" onclick="selectBgColor('#a0aec0')"></div>
                    </div>
                </div>

                <!-- Foreground icon selection -->
                <div class="color-section">
                    <h3 style="color: white; margin-bottom: 16px; font-size: 16px;">Foreground color</h3>
                    <div class="color-grid">
                        <div class="foreground-option selected" onclick="selectFgColor('local_hospital')">
                            <span class="material-icons">local_hospital</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('person')">
                            <span class="material-icons">person</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('face')">
                            <span class="material-icons">face</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('star')">
                            <span class="material-icons">star</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('favorite')">
                            <span class="material-icons">favorite</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('pets')">
                            <span class="material-icons">pets</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('sports_esports')">
                            <span class="material-icons">sports_esports</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('music_note')">
                            <span class="material-icons">music_note</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('camera_alt')">
                            <span class="material-icons">camera_alt</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('code')">
                            <span class="material-icons">code</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('work')">
                            <span class="material-icons">work</span>
                        </div>
                        <div class="foreground-option" onclick="selectFgColor('home')">
                            <span class="material-icons">home</span>
                        </div>
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="preview-section">
                    <h3 style="color: white; margin-bottom: 16px; font-size: 16px;">Preview</h3>
                    <div class="avatar-preview" id="avatarPreview">
                        <span class="material-icons">local_hospital</span>
                    </div>
                    <p style="color: rgba(255, 255, 255, 0.7); font-size: 12px; margin-top: 8px;">
                        This is how your profile picture will look
                    </p>
                </div>

                <!-- Validate Button -->
                <button class="submit-btn" onclick="validatePicture()">
                    <span class="material-icons" style="margin-right: 8px;">check</span>
                    Validate picture
                </button>
            </div>

            <!-- From Computer Tab -->
            <div class="profile-tab-content" id="computerContent" style="display: none;">
                <div style="text-align: center; padding: 40px 20px;">
                    <!-- Hidden File Input -->
                    <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleFileSelect(event)">
                    
                    <!-- Upload Area -->
                    <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                        <span class="material-icons" style="font-size: 48px; color: rgba(255, 255, 255, 0.5); margin-bottom: 16px; display: block;">cloud_upload</span>
                        <h3 style="color: white; margin-bottom: 8px; font-size: 18px;">Upload your picture</h3>
                        <p style="color: rgba(255, 255, 255, 0.6); font-size: 14px; margin-bottom: 16px;">
                            Click here to select an image from your computer
                        </p>
                        <p style="color: rgba(255, 255, 255, 0.4); font-size: 12px;">
                            Supported formats: JPG, PNG, GIF, WebP<br>
                            Maximum size: 5MB
                        </p>
                    </div>
                    
                    <!-- Upload Preview (Initially Hidden) -->
                    <div class="uploaded-preview" id="uploadedPreview" style="display: none;">
                        <h4 style="color: white; margin-bottom: 16px;">Preview</h4>
                        <img id="uploadedImage" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin: 20px 0; border: 3px solid var(--md-sys-color-primary);">
                        <div style="margin: 20px 0;">
                            <button class="submit-btn" onclick="validateUploadedPicture()" style="margin-right: 8px;">
                                <span class="material-icons" style="margin-right: 8px;">check</span>
                                Use this picture
                            </button>
                            <button class="submit-btn" onclick="resetUpload()" style="background: #6b7280;">
                                <span class="material-icons" style="margin-right: 8px;">refresh</span>
                                Choose another
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Settings Modal -->
    <div class="bookmarks-modal" id="profileSettingsModal">
        <div class="bookmarks-header">
            <div class="bookmarks-title">Profile Settings</div>
            <button class="mdc-icon-button" onclick="closeProfileSettingsModal()">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="bookmarks-content" style="padding: 40px 24px; text-align: center;">
            <!-- Profile Picture Section -->
            <div style="margin-bottom: 32px;">
                <h3 style="color: white; font-size: 18px; margin-bottom: 24px; font-weight: 500;">Profile Picture</h3>
                <div class="profile-avatar" style="width: 80px; height: 80px; margin: 0 auto 16px; cursor: pointer; background: gray;">
                    <div class="avatar-icon">
                        <span class="material-icons">star</span>
                    </div>
                </div>
            </div>

            <!-- Profile Name Section -->
            <div style="margin-bottom: 32px;">
                <h3 style="color: white; font-size: 18px; margin-bottom: 16px; font-weight: 500;">Profile Name</h3>
                <input type="text" 
                    id="profileName" 
                    value="Default" 
                    style="width: 100%; max-width: 300px; padding: 12px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; text-align: center; background: white; color: #333;"
                    placeholder="Enter profile name">
            </div>

            <!-- Wallet Section -->
            <div style="margin-bottom: 40px;">
                <h3 style="color: white; font-size: 18px; margin-bottom: 16px; font-weight: 500;">Wallet</h3>
                <select id="profileWallet" 
                        style="width: 100%; max-width: 300px; padding: 12px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; text-align: center; background: white; color: #666;">
                    <option value="primary">Primary wallet</option>
                    <option value="pearl">Pearl wallet</option>
                </select>
            </div>

            <!-- Save Button -->
            <button onclick="saveProfileSettings()" 
                    style="background: #a855f7; color: white; border: none; padding: 16px 48px; border-radius: 25px; font-size: 16px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                Save changes
            </button>

            <!-- Delete Section -->
            <div style="margin-top: 60px; padding-top: 40px; border-top: 1px solid #eee;">
                <p style="color: #666; font-size: 14px; line-height: 1.5; margin-bottom: 24px; max-width: 400px; margin-left: auto; margin-right: auto;">
                    Deleting this profile related data like history, bookmarks and settings will be lost.<br>
                    All rooms and views related to this profile will be closed and deleted.
                </p>
                <button onclick="deleteCurrentProfile()" 
                        style="background: #a855f7; color: white; border: none; padding: 16px 32px; border-radius: 25px; font-size: 16px; cursor: pointer; transition: all 0.2s; font-weight: 500;">
                    Delete profile
                </button>
            </div>
        </div>
    </div>

    <!-- Manage Profiles Modal -->
    <div class="bookmarks-modal" id="manageProfilesModal">
        <div class="bookmarks-header">
            <div class="bookmarks-title">Manage Profiles</div>
            <button class="mdc-icon-button" onclick="closeManageProfilesModal()">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="bookmarks-content">
            <div class="profiles-list">
                <div class="profile-item active">
                    <div class="profile-item-avatar" style="background: gray;">
                        <span class="material-icons">star</span>
                    </div>
                    <div class="profile-item-info">
                        <div class="profile-item-name">Default</div>
                        <div class="profile-item-type">Default</div>
                    </div>
                    <div class="profile-item-actions">
                        <button class="profile-action-btn" onclick="showProfileSettings(); closeManageProfilesModal();">
                            <span class="material-icons">edit</span>
                        </button>
                    </div>
                </div>
                
                <div class="profile-item">
                    <div class="profile-item-avatar" style="background: #4299e1;">
                        <span class="material-icons">work</span>
                    </div>
                    <div class="profile-item-info">
                        <div class="profile-item-name">Work Profile</div>
                        <div class="profile-item-type">Work</div>
                    </div>
                    <div class="profile-item-actions">
                        <button class="profile-action-btn" onclick="switchToProfile('work')">
                            <span class="material-icons">login</span>
                        </button>
                        <button class="profile-action-btn" onclick="showProfileSettings(); closeManageProfilesModal();">
                            <span class="material-icons">edit</span>
                        </button>
                        <button class="profile-action-btn delete" onclick="deleteProfile('work')">
                            <span class="material-icons">delete</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <button class="submit-btn" onclick="addNewProfile()">
                <span class="material-icons">add</span>
                Add New Profile
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/14.0.0/material-components-web.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="script.js"></script>
</body>
</html>